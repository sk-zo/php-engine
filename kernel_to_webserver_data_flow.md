# 커널과 웹서버 간 데이터 전달 구조 정리

## 📌 개요

외부에서 웹서버로 HTTP 요청이 들어올 때, 이 데이터는 네트워크를 통해 **바이너리 형태의 패킷**으로 전달됩니다.  
커널은 이 패킷을 처리하고, 웹서버(애플리케이션 계층)에서는 그 결과인 **Payload(데이터 본문)**만 받아 처리합니다.

---

## 1. 데이터 흐름 개요

```
[외부 클라이언트]
     ↓
[네트워크 카드 (NIC)]
     ↓
[커널 네트워크 스택 - Ethernet/IP/TCP 헤더 제거]
     ↓
[Socket Buffer (Payload만 저장)]
     ↓
[웹서버 애플리케이션 - Payload 처리]
```

---

## 2. 패킷 구조

### ▶ 전송계층(TCP)의 패킷 구성

```
[Ethernet Header][IP Header][TCP Header][Payload (예: HTTP 요청)]
```

- Payload 부분에는 실제 웹 요청 데이터(예: HTTP 메시지)가 들어갑니다.

---

## 3. 커널의 처리 역할

- NIC로 들어온 바이너리 패킷을 커널이 처리함
- Ethernet/IP/TCP 헤더를 제거
- **Payload만 socket buffer에 저장**
- 웹서버는 이 데이터를 `read()`, `recv()` 등으로 읽음

---

## 4. 애플리케이션 계층의 데이터

- 웹서버가 받는 데이터는 **TCP Payload**와 본질적으로 동일함
- 이미 커널이 헤더를 제거했기 때문에 **웹서버는 헤더를 보지 못함**
- 문자열처럼 보이는 HTTP 요청도 실제로는 **바이너리 바이트 스트림**

---

## 5. 핵심 정리

| 구분 | 데이터 구성 | 설명 |
|------|--------------|------|
| TCP 패킷 | `[TCP 헤더][Payload]` | Payload에 HTTP 요청 등이 들어 있음 |
| 웹서버가 받는 데이터 | `Payload만` | 커널이 헤더 제거 후 전달 |

---

## 6. 부가 설명

- 모든 네트워크 데이터는 결국 **바이트 단위의 바이너리 데이터**
- 사람이 읽을 수 있는 문자열(HTTP 요청 등)도 컴퓨터 입장에서는 바이트 배열로 처리됨

---

## ✅ 결론

> 전송계층의 TCP 패킷에서 **헤더를 제외한 Payload는**,  
> 애플리케이션 계층(웹서버)이 받는 데이터와 **사실상 동일하다**.