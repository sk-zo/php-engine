# 🌐 네트워크 계층 구조와 TCP, HTTP의 관계

## 🧱 TCP/IP 4계층 모델

TCP/IP 모델은 실제 네트워크 통신에서 널리 사용되는 계층 구조입니다. 각 계층은 역할이 명확히 분리되어 있어, 어떤 데이터가 어디에서 처리되는지 이해하기 쉽습니다.

| 계층 | 주요 프로토콜 | 역할 | 처리 주체 |
|------|----------------|------|------------|
| **4. 애플리케이션 계층** | HTTP, FTP, DNS | 사용자 요청/응답, 애플리케이션 처리 | 웹서버, 브라우저 등 |
| **3. 전송 계층** | TCP, UDP | 데이터 전송 제어, 포트 관리, 신뢰성 제공 | 운영체제 커널 |
| **2. 인터넷 계층** | IP, ICMP | IP 주소 기반 라우팅 | 운영체제 커널 |
| **1. 네트워크 인터페이스 계층** | Ethernet, Wi-Fi | 실제 전송 (케이블, 무선) | 네트워크 카드, 드라이버 |

---

## 📡 커널 vs 사용자 공간의 역할

| 단계 | 설명 | 누가 처리? |
|------|------|------------|
| TCP 연결 설정 (3-way handshake) | SYN, SYN-ACK, ACK로 연결 수립 | 커널 (TCP/IP 스택) |
| 데이터 수신 후 포트 분배 | 수신 포트에 따라 프로세스에 전달 | 커널 |
| HTTP 요청 파싱 | HTTP 형식인지 판단 및 응답 생성 | 웹 서버 (사용자 공간) |

> 즉, 커널은 "TCP 연결"까지만 책임지고,  
> HTTP 같은 애플리케이션 프로토콜은 **웹 서버가 직접 파싱**합니다.

---

## 📦 포트 기반 통신 이해

- **클라이언트**는 임시 포트 (ephemeral port)를 자동으로 열어 통신
- **서버**는 80(HTTP), 443(HTTPS) 등 **고정된 포트를 리슨(listen)**하고 요청을 대기

---

## 🔄 OSI 7계층과 TCP/IP 4계층 비교

| OSI 7계층 | TCP/IP 계층 | 설명 |
|-----------|--------------|------|
| 7. 응용 계층 | 4. 애플리케이션 계층 | HTTP, FTP, SMTP |
| 6. 표현 계층 | (없음) | 암호화, 인코딩 등 |
| 5. 세션 계층 | (없음) | 세션 관리 |
| 4. 전송 계층 | 3. 전송 계층 | TCP, UDP |
| 3. 네트워크 계층 | 2. 인터넷 계층 | IP, 라우팅 |
| 2. 데이터 링크 계층 | 1. 네트워크 인터페이스 계층 | MAC 주소, ARP |
| 1. 물리 계층 | (하드웨어) | 전기 신호, 케이블 등 |

> 현대 시스템에서는 OSI보다 TCP/IP 4계층 모델이 더 자주 쓰입니다.

---

## ✅ 핵심 요약

- 커널은 TCP/IP 계층까지 처리하고, HTTP는 사용자가 작성한 웹 서버가 처리함
- 포트 번호로 어떤 프로세스가 데이터를 받을지 결정함
- 계층 분리를 이해하면 TCP, 포트, HTTP 동작 원리를 자연스럽게 파악할 수 있음



