# 커널과 웹서버 간 데이터 전달 구조 정리

## 📌 개요

웹 요청이 클라이언트에서 서버로 전달될 때, 그 데이터는 **바이너리 바이트 스트림**으로 전송됩니다.  
커널은 이 데이터를 처리해 웹서버에 전달하며, 웹서버는 이 데이터를 문자열로 해석하고 파싱합니다.  
또한, 이 모든 흐름은 **소켓(socket)**이라는 인터페이스를 통해 이루어집니다.

---

## 1. 데이터 흐름 요약

```
[클라이언트]
     ↓ (ASCII 문자열 → 바이너리 인코딩)
[TCP/IP 계층을 통한 전송]
     ↓
[서버 커널 - TCP/IP 헤더 제거]
     ↓
[Socket Buffer (Payload 저장)]
     ↓
[웹서버 애플리케이션 - Payload 문자열로 디코딩 및 파싱]
```

---

## 2. 바이너리란?

- 바이너리(binary) 데이터란 사람이 읽기 어려운 **0과 1로 구성된 데이터 형식**입니다.
- 컴퓨터는 모든 파일을 결국 이진수로 저장하고 해석합니다.
- 바이너리 파일은 보통 사람이 읽지 못하도록 구조화되어 있고, **특정 포맷 규칙**을 가집니다.

### 📎 예시
- `.txt`, `.html` → 사람이 읽을 수 있는 ASCII/UTF-8 인코딩
- `.jpg`, `.exe`, `.zip` → 구조화된 이진 데이터 → 바이너리 파일

---

## 3. TCP 패킷과 웹서버 데이터

### ▶ TCP 패킷 구조
```
[Ethernet Header][IP Header][TCP Header][Payload (예: HTTP 요청)]
```

- Payload는 실제 HTTP 요청 데이터가 ASCII 인코딩된 바이트 스트림입니다.

### ▶ 커널의 역할
- TCP/IP 헤더를 제거하고, Payload만 socket buffer에 저장
- 웹서버는 이 buffer에서 데이터를 읽음

---

## 4. 소켓(Socket)이란?

- 소켓은 네트워크 통신을 위한 **커널과 애플리케이션 간의 인터페이스**입니다.
- 클라이언트와 서버가 데이터를 주고받을 때, 각자 **소켓을 통해 통신**합니다.
- 소켓은 TCP 연결을 통해 데이터의 송수신을 가능하게 합니다.

### ▶ 서버 측 소켓 처리 흐름 (C/PHP 등 공통)

1. `socket()` – 소켓 생성  
2. `bind()` – 포트에 소켓 바인딩  
3. `listen()` – 연결 대기  
4. `accept()` – 클라이언트 연결 수락  
5. `recv()` / `read()` – 데이터 수신 (Payload)

---

## 5. 웹서버에서 데이터 처리

- 웹서버는 소켓을 통해 받은 데이터를 ASCII 문자열로 디코딩
- 이후 HTTP 프로토콜 규칙에 따라 파싱

```http
GET /index.html HTTP/1.1

Host: example.com

User-Agent: curl/7.68.0



```

---

## 6. 요약 비교

| 단계 | 데이터 형태 | 설명 |
|------|--------------|------|
| 클라이언트 → 서버 | ASCII 문자열 → 바이너리 바이트 스트림 | 전송 전 ASCII 인코딩 |
| TCP 계층 | TCP 헤더 + Payload | Payload에 HTTP 요청 포함 |
| 커널 | TCP/IP 헤더 제거 후 Payload 전달 | socket buffer에 저장 |
| 웹서버 | Payload를 문자열로 디코딩 후 파싱 | GET, Host 등 분석 |

---

## ✅ 결론

- 클라이언트는 HTTP 요청을 ASCII 문자열로 작성하여 바이트 스트림으로 전송합니다.
- 커널은 TCP 헤더를 제거하고 Payload만 웹서버에 전달합니다.
- 웹서버는 이 데이터를 문자열로 디코딩하고 파싱하여 처리합니다.
- 이 모든 과정은 **소켓(socket)**을 통해 연결되고 동작합니다.